<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="../包/vue.js"></script>
</head>

<body>
    <div id="div2">
        <h1 style="color: red;">{{test_val}}</h1>
        <h1 >要求如下：
            点击购买按钮，自动计算订单件数、总价（每件商品价格为100元） </h1>
        <button @click="add">点击购买商品</button>
        <h3>当前订单件数:{{order.x}}</h3>
        <h2>当前订单总价:{{y}}</h2>
    </div>

    <script>      
        new Vue({
            el : "#div2",
            data : {
                test_val : "hello Vue!" ,    // 用于进行挂载测试的数据
                order : {    // 用于保存订单信息的对象
                    or_name : "橘子",       
                    x : 0   // 用于是储存订单件数
                }
            },
            methods : {     // 方法
                add(){
                    this.order.x++
                }
            },
            computed : {    // 计算属性区域
                y(){
                    return this.order.x*100
                }
            },
            watch : {    // 侦听区
                order:{
                    // handler是侦听语法默认函数，只要是 被侦听数据发生变化，他会被自动执行。同时，Vue会给获取到最新的值保存到变量i中
                    handler(i){        // 这里的i是默认形参名，可以随意指定。
                        console.log(i.or_name);
                        console.log(i.x);
                        if(i.x>=10){
                            // alert("当前为生鲜产品，件数过多，请仔细核对后下单！")
                            alert("每人限购十件")
                            this.order.x = 10
                        }
                    },
                    deep : true ,      // 开启侦听器 ，深度监听到对象中每一个属性的变化
                    // 实现页面在刚刷新的时候，就侦听一次
                    immediate: true 
                }
            }
        })
    
        /*
           以下侦听对象数据（结构复杂的数据[数组和对象]）
            深度侦听：
            watch: {        // 侦听器
                侦听对象键名:{
                    handler(i){        // 这里的i是默认形参名，可以随意指定。
                        console.log(i.键);
                        console.log('侦听到事情后 一般我们会做一些事情 就可以在侦听器内 来写逻辑代码');
                    },
                    deep : true       // 开启侦听器 ，深度监听到对象中每一个属性的变化
                }
            }
           
            如果需要实现在页面刚刷新的时候就进行触发侦听
            //  可以控制侦听器自动触发一次 ,默认为false
            immediate: true
        */

    </script>
</body>

</html>